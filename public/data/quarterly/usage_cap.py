# import csv
# import requests

# # API endpoint
# url = "https://cgraph-api.wlink.com.np/cgraphs/api/v1?username=apurna2_kskgdk&ip=10.12.12.226&port=1.5&duration=weekly"

# # Make a GET request to the API
# response = requests.get(url)

# # Check if the request was successful
# if response.status_code == 200:
#     # Convert the response data to a JSON object
#     data = response.json()

#     # Write the data to a CSV file
#     with open('data.csv', 'w', newline='') as file:
#         writer = csv.writer(file)
#         writer.writerow(data[0].keys())
#         for item in data:
#             writer.writerow(item.values())
# else:
#     # If the request was not successful, print an error message
#     print(f"Request failed with status code {response.status_code}")

import json
import requests

sitename = [
'akhaireni2_h_tnhgdk',
'akhaireni4_h_tnhgdk',
'akhaireni6_h_tnhgdk',
'akhaireni6_s_tnhgdk',
'akhaireni6_tnhgdk',
'bandipur5_h_tnhgdk',
'besisahar10_s_lmjgdk',
'besisahar11_h1_lmjgdk',
'besisahar11_s1_lmjgdk',
'besisahar4_h_lmjgdk',
'besisahar4_lmjgdk',
'besisahar4_s_lmjgdk',
'besisahar5_h_lmjgdk',
'besisahar5_lmjgdk',
'besisahar5_s_lmjgdk',
'besisahar6_h_lmjgdk',
'besisahar6_lmjgdk',
'besisahar6_s_lmjgdk',
'bhanu12_h_tnhgdk',
'bhanu12_h1_tnhgdk',
'bhanu12_s_tnhgdk',
'bhanu12_s1_tnhgdk',
'bhanu12_tnhgdk',
'bhanu13_h_tnhgdk',
'bhanu13_s_tnhgdk',
'bhanu13_s1_tnhgdk',
'bhanu13_tnhgdk',
'bhanu4_h_tnhgdk',
'bhanu4_h1_tnhgdk',
'bhanu4_s_tnhgdk',
'bhanu4_tnhgdk',
'bhanu5_h1_tnhgdk',
'bhanu5_s_tnhgdk',
'bhanu5_s1_tnhgdk',
'bhanu5_tnhgdk',
'bhanu6_h1_tnhgdk',
'bhanu6_s_tnhgdk',
'bhanu7_h_tnhgdk',
'bhanu7_s_tnhgdk',
'bhanu7_s1_tnhgdk',
'bhanu7_tnhgdk',
'bheerkot2_h2_syjgdk',
'bheerkot3_s1_syjgdk',
'bheerkot3_s2_syjgdk',
'bheerkot5_s_syjgdk',
'bheerkot6_s1_syjgdk',
'bheerkot7_h_syjgdk',
'bheerkot7_h2_syjgdk',
'bheerkot7_sygjdk',
'bheerkot8_2_syjgdk',
'bheerkot8_h_syjgdk',
'bheerkot8_h1_syjgdk',
'bheerkot8_s_syjgdk',
'bheerkot8_s1_syjgdk',
'bheerkot8_syjgdk',
'bheerkot9_h_syjgdk',
'bheerkot9_s_syjgdk',
'bheerkot9_s2_syjgdk',
'bheerkot9_s3_syjgdk',
'bheerkot9_syjgdk',
'bhimad1_h_tnhgdk',
'bhimad1_h1_tnhgdk',
'bhimad1_s_thngdk',
'bhimad1_s_tnhgdk',
'bhimad1_s3_tnhgdk',
'bhimad1_tnhgdk',
'bhimad2_h_tnhgdk',
'bhimad2_s_tnhgdk',
'bhimad2_s1_tnhgdk',
'bhimad2_s2_tnhgdk',
'bhimad2_tnhgdk',
'bhimad3_h_tnhgdk',
'bhimad4_h1_tnhgdk',
'bhimad4_s_tnhgdk',
'bihadi_prbgdk',
'bihadi1_h_prbgdk',
'bihadi2_h_prbgdk',
'bihadi2_prbgdk',
'bihadi2_s_prbgdk',
'bihadi3_h_prbgdk',
'bihadi3_prbgdk',
'bihadi3_s_prbgdk',
'bihadi4_h_prbgdk',
'bihadi4_prbgdk',
'bihadi4_s_prbgdk',
'bihadi4_s1_prbgdk',
'bihadi4_s2_prbgdk',
'bihadi5_h_prbgdk',
'bihadi5_prbgdk',
'bihadi5_s_prbgdk',
'bihadi5_s1_prbgdk',
'bihadi6_h_prbgdk',
'bihadi6_prbgdk',
'bihadi6_s_prbgdk',
'dpokhari_lmjgdk',
'dpokhari3_h_lmjgdk',
'dpokhari3_lmjgdk',
'dpokhari4_lmjgdk',
'dpokhari4_s_lmjgdk',
'dpokhari5_h_lmjgdk',
'dpokhari5_lmjgdk',
'dpokhari5_s_lmjgdk',
'dpokhari6_lmjgdk',
'galyang_4_s_sygdk',
'galyang10_syjgdk',
'galyang11_s_syjgdk',
'galyang11_s1_syjgdk',
'galyang4_syjgdk',
'galyang5_syjgdk',
'galyang6_s_syjgdk',
'galyang6_syjgdk',
'galyang8_h_syjgdk',
'galyang9_s1_syjgdk',
'ghiring_h_tnhgdk',
'ghiring_s1_tnhgdk',
'ghiring_tnhgdk',
'ghiring1_h_tnhgdk',
'ghiring1_h1_tnhgdk',
'ghiring1_s_tnhgdk',
'ghiring1_s1_tnhgdk',
'ghiring1_tnhgdk',
'ghiring2_h_tnhgdk',
'ghiring2_s_tnhgdk',
'ghiring2_tnhgdk',
'ghiring3_h_tnhgdk',
'ghiring3_tnhgdk',
'ghiring4_h1_tnhgdk',
'ghiring4_s_tnhgdk',
'ghiring4_tnhgdk',
'ghiring5_h_tnhgdk',
'ghiring5_s_tnhgdk',
'ghiring5_s1_tnhgdk',
'ghiring5_tnhgdk',
'harinas4_h1_syjgdk',
'jaljala8_h_prbgdk',
'jaljala8_prbgdk',
'jaljala8_s_prbgdk',
'jaljala9_h_prbgdk',
'jaljala9_prbgdk',
'jaljala9_s_prbgdk',
'kgandaki_syjgdk',
'kgandaki1_h_syjgdk',
'kgandaki1_s_syjgdk',
'kgandaki1_s1_syjgdk',
'kgandaki1_syjgdk',
'kgandaki2_h_syjgdk',
'kgandaki2_s_syjgdk',
'kgandaki2_syjgdk',
'kgandaki3_s_syjgdk',
'kgandaki3_syjgdk',
'kgandaki4_h_syjgdk',
'kgandaki4_s_syjgdk',
'kgandaki4_syjgdk',
'kgandaki5_s_syjgdk',
'kgandaki5_s1_syjgdk',
'kgandaki5_s2_syjgdk',
'kgandaki5_syjgdk',
'kgandaki6_h_syjgdk',
'kgandaki6_s_syjgdk',
'kgandaki6_s1_syjgdk',
'kgandaki6_syjgdk',
'kgandaki7_s_syjgdk',
'kgandaki7_syjgdk',
'klgd07_h_syjgdk',
'ksothar9_h_lmjgdk',
'ksothar9_h1_lmjgdk',
'ksothar9_lmjgdk',
'kusma1_h_prbgdk',
'kusma1_prbgdk',
'kusma1_s_prbgdk',
'kusma1_s1_prbgdk',
'kusma1_s2_prbgdk',
'kusma10_h_prbgdk',
'kusma10_prbgdk',
'kusma10_s_prbgdk',
'kusma10_s1_prbgdk',
'kusma11_h_prbgdk',
'kusma11_prbgdk',
'kusma11_s_prbgdk',
'kusma12_h_prbgdk',
'kusma12_prbgdk',
'kusma12_s_prbgdk',
'kusma13_h_prbgdk',
'kusma13_prbgdk',
'kusma13_s_prbgdk',
'kusma14_h_prbgdk',
'kusma14_prbgdk',
'kusma14_s_prbgdk',
'kusma2_h_prbgdk',
'kusma2_prbgdk',
'kusma2_s_prbgdk',
'kusma2_s1_prbgdk',
'kusma3_h_prbgdk',
'kusma3_prbgdk',
'kusma3_s_prbgdk',
'kusma3_s1_prbgdk',
'kusma7_h_prbgdk',
'kusma9_h_prbgdk',
'kusma9_prbgdk',
'kusma9_s_prbgdk',
'madi6_h1_kskgdk',
'madi6_kskgdk',
'mnepal_s1_lmjgdk',
'mnepal2_h2_lmjgdk',
'mnepal3_h1_lmjgdk',
'mnepal9_s1_lmjgdk',
'mshila_prbgdk',
'mshila1_h_prbgdk',
'mshila1_prbgdk',
'mshila1_s_prbgdk',
'mshila2_h_prbgdk',
'mshila2_prbgdk',
'mshila2_s_prbgdk',
'mshila3_h_prbgdk',
'mshila3_prbgdk',
'mshila3_s_prbgdk',
'mshila4_h_prbgdk',
'mshila4_h1_prbgdk',
'mshila4_prbgdk',
'mshila4_s_prbgdk',
'mshila4_s1_prbgdk',
'mshila4_s2_prbgdk',
'mshila5_h_prbgdk',
'mshila5_prbgdk',
'mshila5_s_prbgdk',
'mshila6_h_prbgdk',
'mshila6_prbgdk',
'mshila6_s_prbgdk',
'myagde6_s_tnhgdk',
'paiyun_prbgdk',
'paiyun1_h_prbgdk',
'paiyun1_prbgdk',
'paiyun1_s_prbgdk',
'paiyun2_h_prbgdk',
'paiyun2_prbgdk',
'paiyun2_s_prbgdk',
'paiyun3_h_prbgdk',
'paiyun3_prbgdk',
'paiyun3_s_prbgdk',
'paiyun4_h_prbgdk',
'paiyun4_prbgdk',
'paiyun4_s_prbgdk',
'paiyun5_h_prbgdk',
'paiyun5_prbgdk',
'paiyun5_s_prbgdk',
'paiyun6_h_prbgdk',
'paiyun6_prbgdk',
'paiyun6_s1_prbgdk',
'paiyun7_h_prbgdk',
'paiyun7_h1_prbgdk',
'paiyun7_prbgdk',
'paiyun7_s_prbgdk',
'paiyun7_s1_prbgdk',
'pbazar13_h1_syjgdk',
'pbazar13_s1_syjgdk',
'pbazar3_s1_syjgdk',
'pbazar5_h_syjgdk',
'pbazar5_s_syjgdk',
'pbazar5_syjgdk',
'pbazar7_h_syjgdk',
'pbazar7_s_syjgdk',
'pbazar7_syjgdk',
'pbazar8_h_syjgdk',
'pbazar8_s_syjgdk',
'pbazar8_syjgdk',
'pbazar9_h_syjgdk',
'pbazar9_s_syjgdk',
'pbazar9_syjgdk',
'pwas2_s_prbgdk',
'pwas3_s2_prbgdk',
'pwas5_l_prbgdk',
'rainas1_h_lmjgdk',
'rainas1_s_lmjgdk',
'rainas10_h_lmjgdk',
'rainas10_lmjgdk',
'rainas9_h_lmjgdk',
'rainas9_lmjgdk',
'rainas9_s_lmjgdk',
'rainas9_s1_lmjgdk',
'rishing_s1_tnhgdk',
'rishing_tnhgdk',
'rishing1_h_tnhgdk',
'rishing1_s_tnhgdk',
'rishing5_h_tnhgdk',
'rishing5_h1_tnhgdk',
'rishing5_s_tnhgdk',
'rishing5_s1_tnhgdk',
'rishing5_tnhgdk',
'rishing6_h_tnhgdk',
'rishing6_s_tnhgdk',
'rishing6_tnhgdk',
'rishing7_h_tnhgdk',
'rishing7_tnhgdk',
'rishing8_h_tnhgdk',
'rishing8_s_tnhgdk',
'rishing8_tnhgdk',
'rupa_0lt',
'rupa_kskgdk',
'rupa1_h_kskgdk',
'rupa1_kskgdk',
'rupa1_s_kskgdk',
'rupa2_h_kskgdk',
'rupa2_kskgdk',
'rupa2_s_kskgdk',
'rupa3_h_kskgdk',
'rupa3_kskgdk',
'rupa3_s_kskgdk',
'rupa4_h_kskgdk',
'rupa4_kskgdk',
'rupa4_s_kskgdk',
'rupa5_h_kskgdk',
'rupa5_kskgdk',
'rupa5_s_kskgdk',
'rupa6_kskgdk',
'rupa6_s_kskgdk',
'rupa6_s2_kskgdk',
'rupa7_h_kskgdk',
'rupa7_kskgdk',
'sbazar10_h_lmjgdk',
'sbazar10_lmjgdk',
'sbazar2_s1_lmjgdk',
'sbazar3_h1_lmjgdk',
'sbazar3_s_lmjgdk',
'sbazar5_h1_lmjgdk',
'sbazar8_s_lmjgdk',
'vyas11_s_tnhgdk',
'vyas7_s1_tnhgdk',
'vyas9_s1_tnhgdk',
'waling1_h_syjgdk',
'waling10_h_syjgdk',
'waling11_h_syjgdk',
'waling11_h1_syjgdk',
'waling11_s_syjgdk',
'waling11_syjgdk',
'waling12_h_syjgdk',
'waling12_s_syjgdk',
'waling12_syjgdk',
'waling13_h_syjgdk',
'waling13_s_syjgdk',
'waling13_s1_syjgdk',
'waling13_syjgdk',
'waling14_h_syjgdk',
'waling14_h1_syjgdk',
'waling14_s_syjgdk',
'waling14_s1_syjgdk',
'waling14_s2_syjgdk',
'waling14_s3_syjgdk',
'waling14_syjgdk',
'waling3_h_syjgdk',
'waling3_s_syjgdk',
'waling3_syjgdk',
'waling4_h_syjgdk',
'waling4_s_syjgdk',
'waling4_syjgdk',
'waling5_h_syjgdk',
'waling5_s_syjgdk',
'waling5_syjgdk',
'waling7_h_syjgdk',
'waling7_s_syjgdk',
'waling7_syjgdk',
'waling8_h_sygjdk',
'waling9_h_syjgdk',


]
for i in sitename:

# API endpoint
    url = "https://cgraph-api.wlink.com.np/cgraphs/api/v1?username="+i+"&ip=10.12.12.226&port=1.5&duration=qutarly"
    print(url);
# Make a GET request to the API
    response = requests.get(url)

# Check if the request was successful
    if response.status_code == 200:
    # Convert the response data to a JSON object
        data = response.json()

    # Write the data to a JSON file
        filename = i.replace("/", "_") + ".json"
        with open(filename, "w") as file:
            # Write the data to the JSON file
            json.dump(data, file)
                
        print(f"Data saved in {filename}")
    else:
    # If the request was not successful, print an error message
        print(f"Request failed with status code {response.status_code}")
